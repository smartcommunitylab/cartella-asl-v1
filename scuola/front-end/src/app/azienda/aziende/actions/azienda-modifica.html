<sub-navbar [titolo]="navTitle" [breadcrumbItems]="breadcrumbItems"></sub-navbar>
<div *ngIf="azienda" class="sub-navbar-content-below">
    <div class="card md-margin mx-auto" style="max-width: 1200px;">
        <div class="card-header">{{titolo}} azienda</div>
        <div class="card-body">
            <div class="row">
                <label class="col-sm-4 detail-label" for="nome">Nome</label>
                <div class="col-sm-8" [class.has-danger]="titoloInput.invalid && (titoloInput.dirty || titoloInput.touched || forceErrorDisplay)">
                    <input type="text" class="form-control" [(ngModel)]="azienda.nome" id="nome" #titoloInput="ngModel" required>
                    <div class="invalid-feedback" [class.d-block]="titoloInput.invalid && (titoloInput.dirty || titoloInput.touched || forceErrorDisplay)">
                        Nome richiesto.
                    </div>
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="descrizione">Descrizione</label>
                <div class="col-sm-8">
                    <textarea class="span6 form-control" rows="3" [(ngModel)]="azienda.description" id="description"></textarea>
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="idTipoAzienda">Tipo</label>
                <div class="col-sm-8" [class.has-danger]="idTipoAzienda.invalid && (idTipoAzienda.dirty || idTipoAzienda.touched || forceErrorDisplay)">
                    <select class="form-control custom_select" [(ngModel)]="azienda.idTipoAzienda" id="idTipoAzienda" #idTipoAzienda="ngModel" required>
                        <option *ngFor="let tipo of tipoAzienda" [ngValue]="tipo.id">{{tipo.value}}</option>
                    </select>
                    <div class="invalid-feedback" [class.d-block]="idTipoAzienda.invalid && (idTipoAzienda.dirty || idTipoAzienda.touched || forceErrorDisplay)">
                        Tipo richiesto.
                    </div>
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="address">Indirizzo</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" [(ngModel)]="azienda.address">
                </div>
            </div>

            <div class="row">
                <label class="col-sm-4 detail-label" for="pIva">Partita IVA</label>
                <div class="col-sm-8" [class.has-danger]="pIva.invalid && (pIva.dirty || pIva.touched || forceErrorDisplay)">                    
                    <input type="text" class="form-control" [(ngModel)]="azienda.partita_iva" id="pIva" #pIva="ngModel" required>
                    <div class="invalid-feedback" [class.d-block]="pIva.invalid && (pIva.dirty || pIva.touched || forceErrorDisplay)">
                        Partita IVA richieste.
                    </div>
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="email">Email</label>
                <div class="col-sm-8">
                    <input type="text" [(ngModel)]="azienda.email" class="form-control" id="email">
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="referenteFormazioneCF">Pec</label>
                <div class="col-sm-8">
                    <input type="text" [(ngModel)]="azienda.pec" class="form-control" id="pec">
                </div>
            </div>
            <div class="row">
                <label class="col-sm-4 detail-label" for="phone">Telefono</label>
                <div class="col-sm-8">
                    <input type="text" [(ngModel)]="azienda.phone" class="form-control" id="phone">
                </div>
            </div>            
            <div class="row">
                <label class="col-sm-4 detail-label" for="indirizzo">Posizione:</label>
                <div class="col-sm-8">                    
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div id="map" style="height:300px;width:100%;"></div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    Cerca per indirizzo: 
                    <input type="text" [(ngModel)]="indirizzo" class="form-control" (input)="getItems($event)" id="indirizzo">
                    <div class="list-group autocompletion-list " *ngIf="showAddressesList">
                        <a class="list-group-item list-group-item-action" *ngFor="let item of addressesItems" (click)="selectPlace(item)">
                            {{ item.name }}
                        </a>
                    </div>
                </div>
            </div>

        </div>
        <div class="d-flex justify-content-center md-margin">
            <button type="button" class="btn btn-danger v-center m-5" (click)="cancel()"><i class="material-icons">cancel</i>&nbsp;Annulla</button>
            <button type="button" class="btn btn-success v-center m-5" (click)="modifica()"><i class="material-icons">save</i>&nbsp;Salva azienda</button>
        </div>        
    </div>
</div>
